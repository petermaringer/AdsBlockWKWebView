name: AdsBlockWKWebView
options:
  bundleIdPrefix: at.co.weinmann
  #postGenCommand: pod install
  deploymentTarget:
    iOS: "16.0"
settingGroups:
  preset:
    base:
      DEVELOPMENT_TEAM: NG9KE3E3Q3
      #CODE_SIGN_STYLE: Manual
      CODE_SIGN_IDENTITY: Apple Distribution
    #configs:
      #release:
        #PROVISIONING_PROFILE_SPECIFIER: 'e754d764-03d6-416f-ba83-203d4ea55fe9'
#packages:
targets:
  AdsBlockWKWebView:
    type: application
    platform: iOS
    #deploymentTarget: '10.0'
    #deploymentTarget: '16.0'
    sources:
      - path: AdsBlockWKWebView
        excludes:
          - adawayTEST.json
          #- Assets.xcassets/AppIconOld.appiconset
    settings:
      groups:
        - preset
      base:
        SWIFT_VERSION: '4.0'
        #SWIFT_OBJC_BRIDGING_HEADER: B-Header.h
      configs:
        release:
          PROVISIONING_PROFILE_SPECIFIER: '370821b0-f384-4fb3-be72-41f47b8a6126'
    entitlements:
      path: AdsBlockWKWebView/App.entitlements
      properties:
        com.apple.security.application-groups: [group.at.co.weinmann.AdsBlockWKWebView]
    scheme:
      configVariants:
    dependencies:
      - target: AdsBlockWKWebViewShare
        #codeSign: false
        embed: true
      #- package: XYZ
  AdsBlockWKWebViewShare:
    type: app-extension
    platform: iOS
    #deploymentTarget: '16.0'
    sources:
      - path: AdsBlockWKWebViewShare
    settings:
      groups:
        - preset
      base:
        SWIFT_VERSION: '4.0'
        PRODUCT_BUNDLE_IDENTIFIER: at.co.weinmann.AdsBlockWKWebView.Share
      configs:
        release:
          PROVISIONING_PROFILE_SPECIFIER: 'aad5d130-7c8d-46e7-8424-4aba86f71b9a'
    info:
      path: AdsBlockWKWebViewShare/Info.plist
      properties:
        NSExtension:
          NSExtensionAttributes:
            NSExtensionActivationRule:
              NSExtensionActivationSupportsWebURLWithMaxCount: 1
              #NSExtensionActivationSupportsWebPageWithMaxCount: 1
              #NSExtensionActivationSupportsImageWithMaxCount: 1
              #NSExtensionActivationSupportsFileWithMaxCount: 1
              #NSExtensionActivationSupportsAttachmentsWithMaxCount: 1
              #NSExtensionActivationSupportsText: true
          NSExtensionPointIdentifier: com.apple.share-services
          NSExtensionPrincipalClass: AdsBlockWKWebView.Share.ShareViewController
    entitlements:
      path: AdsBlockWKWebViewShare/App.entitlements
      properties:
        com.apple.security.application-groups: [group.at.co.weinmann.AdsBlockWKWebView]
        #com.apple.developer.default-data-protection: NSFileProtectionComplete
    #scheme:
      #configVariants:
    #dependencies:
      #- target: AdsBlockWKWebView
    onlyCopyFilesOnInstall: true

